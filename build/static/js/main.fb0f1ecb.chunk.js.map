{"version":3,"sources":["components/loginform.js","components/blogform.js","components/togglable.js","components/blogs.js","services/blogs.js","services/login.js","components/notification.js","App.js","index.js"],"names":["LoginForm","handleLogin","useState","username","setUsername","password","setPassword","onSubmit","event","preventDefault","type","value","name","onChange","target","BlogForm","addBlog","newBlog","setNewBlog","newAuthor","setNewAuthor","newUrl","setNewUrl","blogToCreate","console","log","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","onClick","buttonLabel","children","displayName","Rivi","n","updateBlog","deleteBlog","details","set_detail_level","text","title","url","likes","newData","id","author","Blogs","user","blogs","map","baseUrl","token","getAll","a","config","headers","Authorization","axios","get","response","data","create","newObject","post","status","update","put","deleteRecord","delete","setToken","newToken","login","newUser","NotificationMessage","message","className","App","setBlogs","errorMessage","setErrorMessage","setUser","blogFormRef","useRef","loginFormRef","useEffect","loggedUserJSON","window","localStorage","getItem","JSON","parse","blogService","setTimeout","updateAllBlogs","then","catch","error","loginService","setItem","stringify","current","handleLogout","removeItem","returnedBlog","concat","logout_button","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fb0f1ecb.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst LoginForm = ({ handleLogin }) => {\r\n  const [username, setUsername] = useState('')\r\n  const[password, setPassword] = useState('')\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (handleLogin(username, password) === true){\r\n      setUsername('')\r\n      setPassword('')\r\n    }\r\n\r\n  }\r\n  return(\r\n    <div>\r\n      <h2>login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n            username <input type='text' value={username} name='Username'\r\n            onChange={({ target }) =>  setUsername(target.value)}/>\r\n        </div>\r\n        <div>\r\n          password <input type='password' value={password} name = 'Password'\r\n            onChange={({ target }) => setPassword(target.value)} />\r\n        </div>\r\n        <div>\r\n          <button type='submit'>login</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ addBlog }) => {\r\n  const [newBlog, setNewBlog] = useState('')\r\n  const [newAuthor, setNewAuthor] = useState('')\r\n  const [newUrl, setNewUrl] = useState('')\r\n\r\n  const add = (event) => {\r\n    event.preventDefault()\r\n    const blogToCreate = {\r\n      'title': newBlog,\r\n      'author': newAuthor,\r\n      'url': newUrl\r\n    }\r\n\r\n    console.log(blogToCreate)\r\n    addBlog(blogToCreate)\r\n    setNewBlog('')\r\n    setNewAuthor('')\r\n    setNewUrl('')\r\n  }\r\n\r\n  return(\r\n    <form onSubmit={add}>\r\n      <p>Blog<input type ='text' value={newBlog}\r\n        onChange={(event) => { setNewBlog(event.target.value)}} /> </p>\r\n      <p>Author<input type ='text' value={newAuthor}\r\n        onChange={ (event) => { setNewAuthor(event.target.value)}} /> </p>\r\n      <p>Url<input type ='text' value={newUrl}\r\n        onChange={(event) => { setNewUrl(event.target.value)}} /> </p>\r\n      <button type='submit'>save</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default BlogForm","import React, { useState, useImperativeHandle } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props,ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n  const hideWhenVisible =  { display: visible ? 'none': '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nTogglable.displayName = 'Togglable'\r\n\r\nexport default Togglable","import React, { useState } from 'react'\r\n\r\n\r\nconst Blogs = ({ user, blogs, updateBlog, deleteBlog }) => {\r\n\r\n  if (user !== null) {\r\n    return(\r\n      blogs.map(n => <Rivi key = {n.id} n={n} updateBlog={updateBlog} deleteBlog={deleteBlog}/>)\r\n    )\r\n  }\r\n  else\r\n    return ( 'nobody logged in yet' )\r\n}\r\n\r\n\r\nconst Rivi = ({ n, updateBlog, deleteBlog }) => {\r\n  const [details, set_detail_level] = useState(false)\r\n\r\n  const toggleDetails = () => { set_detail_level(!details)}\r\n\r\n  let style = { display: 'none' }\r\n  let text = 'Show'\r\n  if (details){\r\n    style = { display: '' }\r\n    text = 'Hide'\r\n  }\r\n\r\n  const addLike = (event) => {\r\n    event.preventDefault()\r\n    const newData = n\r\n    newData['likes'] = n['likes'] +1\r\n    updateBlog(n.id, newData)\r\n  }\r\n\r\n  const del = (event) => {\r\n    event.preventDefault()\r\n    deleteBlog(n.id)\r\n  }\r\n\r\n  return(\r\n    <div>\r\n      <div>\r\n            Juttu: {n.title}\r\n        <button onClick = {toggleDetails} > {text} </button>\r\n      </div>\r\n      <div style={style} >\r\n        <p>Url:{n.url}</p>\r\n        <p>likes:{n.likes} <button  onClick={addLike}> like </button>\r\n        </p>\r\n        <p> Tuottaja: {n.author} </p>\r\n      </div>\r\n      <div>\r\n        <button  onClick={del}> Poista </button>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Blogs\r\n\r\n","import axios from 'axios'\r\nconst baseUrl = 'http://127.0.0.1:3003/api/blogs'\r\n\r\nlet token = null\r\nconst setToken = newToken => {\r\n  token = (newToken) ? `bearer ${newToken}` : null\r\n}\r\n\r\nconst getAll = async () => {\r\n  const config =  { headers: { Authorization: token } }\r\n  console.log('config:', config)\r\n  const response = await axios.get(baseUrl, config)\r\n  console.log(response.data)\r\n  return response.data\r\n}\r\n\r\n\r\nconst create = async (newObject) => {\r\n  const config =  { headers: { Authorization: token } }\r\n  console.log('config addissä:', config)\r\n  const response = await axios.post( baseUrl, newObject, config)\r\n  console.log('status adistä', response.status)\r\n  console.log('response', response.data)\r\n  return response.data\r\n}\r\n\r\nconst update = (id,newData) => {\r\n  console.log('update alkaa')\r\n  const config =  { headers: { Authorization: token } }\r\n  const response = axios.put(`${baseUrl}/${id}`, newData, config)\r\n  console.log('update done', response)\r\n  return response.data\r\n}\r\n\r\nconst deleteRecord = async (id) => {\r\n  console.log('delete alkaa')\r\n  const config =  { headers: { Authorization: token } }\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  console.log('delete done', response.status)\r\n  return response.status\r\n}\r\n\r\nexport default { getAll, create, update, deleteRecord, setToken }","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3003/login'\r\n\r\nconst login = async (newUser) => {\r\n  const response = await axios.post(baseUrl, newUser)\r\n  console.log('response', response)\r\n  return response\r\n}\r\nexport default { login }","import React from 'react'\r\n\r\nconst NotificationMessage = ({ message }) => {\r\n  if (message !== null)\r\n    return (\r\n      <div className='error'>\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default NotificationMessage","import React, { useState, useEffect, useRef } from 'react'\r\nimport LoginForm from './components/loginform'\r\nimport BlogForm from './components/blogform'\r\nimport Togglable from './components/togglable.js'\r\nimport Blogs from './components/blogs'\r\nimport blogService from './services/blogs.js'\r\nimport loginService from './services/login'\r\nimport NotificationMessage from './components/notification.js'\r\n\r\n\r\nconst App = () => {\r\n\r\n\r\n  const [blogs, setBlogs] = useState([])\r\n\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  const [user,setUser] = useState(null)\r\n\r\n  const blogFormRef = useRef()\r\n  const loginFormRef = useRef()\r\n\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\r\n    if(loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n      setTimeout(setErrorMessage(`Tervetuloa taas ${user.name}`,2000))\r\n      setTimeout(() => {setErrorMessage('')},5000)\r\n\r\n    }\r\n  }, [] )\r\n\r\n  const updateAllBlogs = () => {\r\n    blogService.getAll()\r\n      .then(blogs => {\r\n        console.log('promise fullfilled')\r\n        setBlogs( blogs )})\r\n      .catch(function (error) {\r\n        console.log('Error', error)\r\n        setErrorMessage(error.message)\r\n        setTimeout(() => { setErrorMessage('')},5000)\r\n        throw error\r\n      })\r\n  }\r\n\r\n  useEffect( updateAllBlogs , [])\r\n\r\n  const handleLogin = async (username,password) => {\r\n    console.log('logging with', username, password)\r\n    try{\r\n      const response = await loginService.login({ username,password })\r\n      console.log('response status:',response.status)\r\n      console.log('response data:',response.data)\r\n      if (response.status === 200){\r\n        window.localStorage.setItem('loggedBlogappUser', JSON.stringify(response.data))\r\n        console.log('Asetetaan local storakeen',response.data)\r\n        blogService.setToken(response.data.token)\r\n        setUser(response.data)\r\n        loginFormRef.current.toggleVisibility()\r\n\r\n        return true\r\n      }\r\n    } catch(error) {\r\n      console.log('wrong credentials')\r\n      setErrorMessage('Väärä tunnus tai salasana')\r\n      setTimeout(() => {setErrorMessage('')},5000)\r\n    }\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    setUser(null)\r\n    window.localStorage.removeItem('loggedBlogappUser')\r\n  }\r\n\r\n  const logout_button = () => {\r\n    if (user !== null)\r\n      return (\r\n        <div>\r\n          <p>{user.name} logged in\r\n            <button onClick = {handleLogout}> Logout </button>\r\n          </p>\r\n        </div>\r\n      )\r\n  }\r\n\r\n  const addBlog = async (blogToCreate) => {\r\n\r\n    blogFormRef.current.toggleVisibility()\r\n\r\n    try{\r\n      console.log('Luodaan uusi', blogToCreate)\r\n      const returnedBlog = await blogService.create(blogToCreate)\r\n      setBlogs( blogs.concat(returnedBlog))\r\n      setErrorMessage('Uusi tietue lisätty')\r\n      setTimeout(() => {setErrorMessage('')},5000)\r\n    }\r\n    catch(error){\r\n      console.log('Joku virhe', error)\r\n      setErrorMessage(error)\r\n      setTimeout(() => { setErrorMessage('')},5000)\r\n    }\r\n  }\r\n\r\n  const updateBlog = async (id, newData) => {\r\n    const response = await blogService.update(id, newData)\r\n    setErrorMessage('Tietue lisätty')\r\n    setTimeout(() => {setErrorMessage('')},5000)\r\n    return response.data\r\n  }\r\n\r\n  const deleteBlog = async (id) => {\r\n    const response = await blogService.deleteRecord(id)\r\n    if (response === 204){\r\n      setErrorMessage('Tietue poistettu')\r\n      setTimeout(() => { setErrorMessage('')},5000)\r\n      updateAllBlogs()\r\n    }\r\n    else {\r\n      setErrorMessage('Poisto ei onnistunut')\r\n      setTimeout(() => {setErrorMessage('')},5000)\r\n    }\r\n  }\r\n\r\n  const loginForm = () => (\r\n    <Togglable buttonLabel = 'lggin' ref = {loginFormRef} >\r\n      <LoginForm handleLogin = {handleLogin} />\r\n    </Togglable>\r\n  )\r\n\r\n  const blogForm = () => (\r\n    <Togglable buttonLabel='create new' ref = {blogFormRef}>\r\n      <BlogForm addBlog = {addBlog} />\r\n    </Togglable>\r\n  )\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n      <NotificationMessage message={errorMessage} />\r\n\r\n      {loginForm()}\r\n\r\n      {logout_button() }\r\n\r\n      {user !== null && blogForm()}\r\n\r\n      <Blogs user={user} blogs={blogs} updateBlog={updateBlog} deleteBlog={deleteBlog}/>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}